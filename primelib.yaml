# yaml-language-server: $schema=https://raw.githubusercontent.com/primelib/primecodegen/main/configschema/primelib-v1.json
output: sdk
outputSubDir: true

repository:
  name: Confluence REST Client
  description: Unofficial API client generated from the Confluence OpenAPI specification.
  url: https://github.com/primelib/confluence-client
  licenseName: MIT
  licenseURL: https://github.com/primelib/confluence-client/blob/main/LICENSE

maintainers:
  - id: PhilippHeuer
    name: Philipp Heuer
    email: git@philippheuer.de

spec:
  file: openapi.yaml
  type: openapi3
  sources:
    # source: https://developer.atlassian.com/cloud/confluence/rest/v1/intro/#about
    - url: https://dac-static.atlassian.com/cloud/confluence/swagger.v3.json
      type: openapi3
      patches:
        - type: openapi-overlay
          file: spec_patches/overlay.yaml
  patches:
    - id: prune-path-prefix
      config:
        prefix: "/wiki"
    - id: simplify-polymorphic-schemas
    - id: flatten-components
    - id: fix-missing-schema-title
    - id: generate-operation-id
      config:
        trim-prefix: "/rest/api"
    - id: fix-common

# v2 is still lacking major features.
# source: https://developer.atlassian.com/cloud/confluence/rest/v2/intro/#about
#- url: https://dac-static.atlassian.com/cloud/confluence/openapi-v2.v3.json

presets:
  java:
    enabled: true
    groupId: io.github.primelib
    artifactId: confluence4j-rest-v1
